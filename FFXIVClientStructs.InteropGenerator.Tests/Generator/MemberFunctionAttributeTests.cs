using Xunit;
using VerifyIG = FFXIVClientStructs.InteropGenerator.Tests.Helpers.IncrementalGeneratorVerifier<FFXIVClientStructs.InteropGenerator.Generator.InteropGenerator>;

namespace FFXIVClientStructs.InteropGenerator.Tests.Generator;

public class MemberFunctionAttributeTests {
    [Fact]
    public async Task GenerateMemberFunction() {
        const string code = """
                            using FFXIVClientStructs.InteropGenerator.Runtime.Attributes;

                            [GenerateInterop]
                            public unsafe partial struct TestStruct
                            {
                                [MemberFunction("AA BB CC DD EE ?? ?? ?? FF GG HH")]
                                public int TestFunction(int argOne, void * argTwo) { return 0 };
                            }
                            """;

        const string result = """
                              // <auto-generated/>
                              unsafe partial struct TestStruct
                              {
                              }
                              """;

        await VerifyIG.VerifyGeneratorAsync(
            code,
            ("TestStruct.InteropGenerator.g.cs", result));
    }
    
}
